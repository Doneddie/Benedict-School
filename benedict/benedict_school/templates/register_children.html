{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}

{% block title %} REGISTRATION {% endblock title %}
{% block stylesheets %}
    {{ block.super }} <!-- This includes the CSS from the base.html -->
    <!-- Use this line for Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'benedict_school/css/register_children.css' %}">
{% endblock %}
{% block content %}
<h1>Register Children for {{ parent.first_name }} {{ parent.last_name }}</h1>

<!-- Display Accordion for Child Forms and Application Forms -->
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="accordion" id="childFormsAccordion">
        {% for form, application_form in combined_forms %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse{{ forloop.counter }}">
                        Child {{ forloop.counter }}
                    </button>
                </h2>
                <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse {% if forloop.counter == 1 %}show{% endif %}" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#childFormsAccordion">
                    <div class="accordion-body">
                        <!-- Child Registration Form -->
                        <fieldset>
                            <legend>Child Registration</legend>
                            {{ form.as_p }}
                        </fieldset>
                        
                        <!-- Child's Application Form -->
                        <fieldset class="application-fieldset">
                            <legend>Application for Child {{ forloop.counter }}</legend>
                            {{ application_form.as_p }}
                        </fieldset>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <button type="submit" class="btn btn-primary btn-lg">Submit</button>
</form>
{% endblock %}



